---
apiVersion: postgresql.cnpg.io/v1
kind: Cluster
metadata:
  name: cluster-example-initdb
  namespace: postgres3
spec:
  instances: 3

  bootstrap:
    initdb:
      database: app
      owner: app
      secret:
        name: app-secret

  storage:
    size: 1Gi
    storageClass: rook-cephfs
  backup:
    volumeSnapshot:
      # Thêm cấu hình cho VolumeSnapshot
      className: csi-cephfsplugin-snapclass
---
apiVersion: postgresql.cnpg.io/v1
kind: Backup
metadata:
  name: backup1
  namespace: postgres3
spec:
  method: volumeSnapshot
  cluster:
    name: cluster-example-initdb
